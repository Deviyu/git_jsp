<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">
<!-- 전체 사용자 리스트 조회 -->
 	<select id="userList" resultType="UserVO">
    	SELECT * FROM USERS ORDER BY USERID
 	</select>
  
	<!-- 특정 사용자 조회 -->
 	<select id="getUser" parameterType = "String" resultType="UserVO">
  		SELECT *
  		FROM USERS
  		WHERE USERID = #{userId}
 	</select>
  
 	<!-- 사용자 페이지 리스트 조회 -->
	<select id="userPagingList" parameterType="PageVO" resultType="UserVO">
		<![CDATA[
	 	SELECT *
		FROM
		(SELECT A.*, ROWNUM RN
		FROM
		(SELECT A.*
		FROM USERS A
		ORDER BY USERID) A ) A
		WHERE RN >= ( ( #{page} - 1 ) * #{pageSize} + 1) AND RN <= ( #{page} * #{pageSize} )
		]]>	
	</select>
	 
	<!-- 사용자 전체 수 조회 -->
 	<select id = "usersCnt" resultType="int">
 		SELECT COUNT(*)
 		FROM USERS
 	</select>
 	<insert id="insertUser" parameterType ="UserVO">
 		INSERT INTO USERS
	 			(
	 				 USERID
	 				,NAME
	 				,ALIAS
	 				,PASS
	 				,ADDR1
	 				,ADDR2
	 				,ZIPCD
	 				,BIRTH
	 				,PATH
	 				,FILENAME
	 			)
 					 VALUES
 				(
 					 #{userId}
 					,#{name}
 					,#{alias}
 					,#{pass}
 					,#{addr1}
 					,#{addr2}
 					,#{zipcd}
 					,TO_DATE(#{birth}, 'yyyy-mm-dd')
 					,'D:/upload/'||#{filename}
 					,#{filename}
 				)
 	</insert>
 	
</mapper>